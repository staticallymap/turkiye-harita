<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<title>T√ºrkiye Harita Projesi</title>

<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"/>

<style>
*{margin:0;padding:0;box-sizing:border-box}
body{font-family:Segoe UI;background:#1a1a2e;overflow:hidden}

header{
position:absolute;top:0;left:0;right:0;z-index:1000;
background:linear-gradient(135deg,#667eea,#764ba2);
padding:20px 40px;
box-shadow:0 4px 20px rgba(0,0,0,.3)
}
h1{color:#fff;font-size:26px}

#container{display:flex;height:100vh;padding-top:80px}
#map{flex:1}

#sidebar{
width:0;overflow:hidden;
background:linear-gradient(135deg,#1e3c72,#2a5298);
color:white;
transition:.3s;
}
#sidebar.active{width:380px;padding:30px;overflow-y:auto}

.property{margin:15px 0;background:rgba(255,255,255,.1);padding:12px;border-radius:10px}
.property label{font-size:12px;color:#a8b2ff}
.property .value{font-size:18px}

.close-btn{
position:absolute;top:20px;right:20px;
background:rgba(255,255,255,.2);
border:none;color:white;
width:32px;height:32px;border-radius:50%;
cursor:pointer
}
</style>
</head>

<body>

<header><h1>üó∫Ô∏è T√ºrkiye ƒ∞l Haritasƒ±</h1></header>

<div id="container">
  <div id="map"></div>
  <div id="sidebar"></div>
</div>

<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
<script>

const map = L.map('map').setView([39,35],6);
L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',{
attribution:'¬© OpenStreetMap'
}).addTo(map);

let geojson;
let cityData = {};

// ---------------- HELPERS ----------------
function parsePopulation(str){
if(!str) return 0;
return Number(str.replace(/\./g,''));
}

function getColorByPopulation(p){
return p>5000000?'#4a1486':
       p>3000000?'#6a1b9a':
       p>2000000?'#7b1fa2':
       p>1000000?'#8e24aa':
       p>500000?'#ab47bc':
       p>250000?'#ce93d8':'#ede7f6';
}

// ---------------- STYLE ----------------
function style(feature){
const city = cityData[feature.properties.name];
const pop = city ? parsePopulation(city.nufus) : 0;
return {
fillColor:getColorByPopulation(pop),
weight:1.5,
color:'white',
fillOpacity:.75
};
}

// ---------------- SIDEBAR ----------------
function updateSidebar(name){
const s=document.getElementById('sidebar');
const d=cityData[name];
s.innerHTML=`
<button class="close-btn" onclick="closeSidebar()">‚úï</button>
<h2>${name}</h2>
${d?`
<div class="property"><label>Plaka</label><div class="value">${d.plaka}</div></div>
<div class="property"><label>N√ºfus</label><div class="value">${d.nufus}</div></div>
<div class="property"><label>B√∂lge</label><div class="value">${d.bolge}</div></div>
<div class="property"><label>Y√ºz√∂l√ß√ºm√º</label><div class="value">${d.yuzolcumu}</div></div>
`:`<div class="property"><div class="value">Bilgi yok</div></div>`}
`;
s.classList.add('active');
setTimeout(()=>map.invalidateSize(),300);
}

function closeSidebar(){
document.getElementById('sidebar').classList.remove('active');
setTimeout(()=>map.invalidateSize(),300);
}

// ---------------- EVENTS ----------------
function onEachFeature(feature,layer){
layer.on({
click:e=>{
map.fitBounds(e.target.getBounds());
updateSidebar(feature.properties.name);
}
});
}

// ---------------- LOAD DATA ----------------
Promise.all([
fetch('cities-data.json').then(r=>r.json()),
fetch('https://raw.githubusercontent.com/cihadturhan/tr-geojson/master/geo/tr-cities-utf8.json').then(r=>r.json())
]).then(([cities,geo])=>{
cityData=cities;
geojson=L.geoJson(geo,{style,onEachFeature}).addTo(map);
});

</script>
</body>
</html>
