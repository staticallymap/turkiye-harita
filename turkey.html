<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<title>GeoStats | TÃ¼rkiye HaritasÄ±</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"/>

<style>
*{margin:0;padding:0;box-sizing:border-box}
body{
font-family:Segoe UI,system-ui;
background:#0f172a;
color:white;
}

header{
background:linear-gradient(135deg,#667eea,#764ba2);
padding:20px 40px;
text-align:center;
}

header h1{
font-size:26px;
}

#container{
display:flex;
height:calc(100vh - 72px);
}

#map{
flex:1;
}

#sidebar{
width:0;
background:linear-gradient(135deg,#1e3c72,#2a5298);
overflow:hidden;
transition:.3s;
padding:0;
}

#sidebar.active{
width:380px;
padding:30px;
overflow-y:auto;
}

#sidebar h2{
margin-bottom:20px;
border-bottom:2px solid #667eea;
padding-bottom:10px;
}

.property{
margin:15px 0;
background:rgba(255,255,255,.1);
padding:12px;
border-radius:10px;
}

.property label{
display:block;
font-size:12px;
letter-spacing:1px;
color:#a8b2ff;
margin-bottom:5px;
}

.property value{
font-size:17px;
}

.close-btn{
position:absolute;
top:20px;
right:20px;
background:rgba(255,255,255,.2);
border:none;
color:white;
width:32px;
height:32px;
border-radius:50%;
cursor:pointer;
font-size:18px;
}

.info{
padding:10px 14px;
background:linear-gradient(135deg,#667eea,#764ba2);
border-radius:10px;
}
</style>
</head>

<body>

<header>
<h1>ğŸ—ºï¸ TÃ¼rkiye HaritasÄ± ve Ä°statistikler</h1>
</header>

<div id="container">
  <div id="map"></div>
  <div id="sidebar">
    <button class="close-btn" onclick="closeSidebar()">âœ•</button>
  </div>
</div>

<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

<script>
/* === Ä°L VERÄ°LERÄ° === */
var cityData = {
"Adana":{"plaka":1,"nufus":2237942,"yillikArtis":0.8,"bolge":"Akdeniz","yuzolcumu":14003},
"Ankara":{"plaka":6,"nufus":5663322,"yillikArtis":1.1,"bolge":"Ä°Ã§ Anadolu","yuzolcumu":25680},
"Ä°stanbul":{"plaka":34,"nufus":15840912,"yillikArtis":1.2,"bolge":"Marmara","yuzolcumu":5461},
"Ä°zmir":{"plaka":35,"nufus":4424645,"yillikArtis":0.8,"bolge":"Ege","yuzolcumu":11891},
"Antalya":{"plaka":7,"nufus":2586563,"yillikArtis":1.5,"bolge":"Akdeniz","yuzolcumu":20109},
"Bursa":{"plaka":16,"nufus":3056120,"yillikArtis":1.2,"bolge":"Marmara","yuzolcumu":10900}
};

/* === HARÄ°TA === */
var map = L.map('map').setView([39,35],6);

L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',{
attribution:'Â© OpenStreetMap'
}).addTo(map);

var info = L.control();
info.onAdd = function(){
this._div = L.DomUtil.create('div','info');
this.update();
return this._div;
};
info.update = function(props){
this._div.innerHTML = '<b>TÃ¼rkiye</b><br>'+(props?props.name:'Ä°l seÃ§in');
};
info.addTo(map);

function getColor(pop){
return pop>5000000?'#4a1486':
pop>3000000?'#6a1b9a':
pop>2000000?'#7b1fa2':
pop>1000000?'#8e24aa':
'#ce93d8';
}

function style(feature){
var c = cityData[feature.properties.name];
return{
fillColor:getColor(c?c.nufus:0),
weight:1,
color:'#fff',
fillOpacity:.75
};
}

function highlight(e){
var l=e.target;
l.setStyle({weight:4,color:'#fff'});
info.update(l.feature.properties);
}

function reset(e){
geojson.resetStyle(e.target);
info.update();
}

function clickCity(e){
map.fitBounds(e.target.getBounds());
updateSidebar(e.target.feature.properties.name);
}

function onEach(f,l){
l.on({mouseover:highlight,mouseout:reset,click:clickCity});
}

var geojson = L.geoJson(null,{style:style,onEachFeature:onEach}).addTo(map);

fetch('https://raw.githubusercontent.com/cihadturhan/tr-geojson/master/geo/tr-cities-utf8.json')
.then(r=>r.json())
.then(d=>geojson.addData(d));

function updateSidebar(name){
var s=document.getElementById('sidebar');
var d=cityData[name];

if(d){
s.innerHTML=`
<button class="close-btn" onclick="closeSidebar()">âœ•</button>
<h2>${name}</h2>
<div class="property"><label>Plaka</label><value>${d.plaka}</value></div>
<div class="property"><label>NÃ¼fus</label><value>${d.nufus.toLocaleString()}</value></div>
<div class="property"><label>YÄ±llÄ±k ArtÄ±ÅŸ %</label><value>${d.yillikArtis}</value></div>
<div class="property"><label>BÃ¶lge</label><value>${d.bolge}</value></div>
<div class="property"><label>YÃ¼zÃ¶lÃ§Ã¼mÃ¼ kmÂ²</label><value>${d.yuzolcumu}</value></div>
`;
}else{
s.innerHTML=`<button class="close-btn" onclick="closeSidebar()">âœ•</button><h2>${name}</h2><p>Detay eklenmedi</p>`;
}

s.classList.add('active');
setTimeout(()=>map.invalidateSize(),300);
}

function closeSidebar(){
document.getElementById('sidebar').classList.remove('active');
setTimeout(()=>map.invalidateSize(),300);
}
</script>

</body>
</html>
